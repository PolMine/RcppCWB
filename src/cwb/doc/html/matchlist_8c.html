<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CWB: cqp/matchlist.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CWB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('matchlist_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">matchlist.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="cl_8h.html">../cl/cl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="attributes_8h.html">../cl/attributes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="matchlist_8h.html">matchlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="output_8h.html">output.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="eval_8h.html">eval.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcf5e03e33505f67f3af93af20003cea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#adcf5e03e33505f67f3af93af20003cea">init_matchlist</a> (<a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *matchlist)</td></tr>
<tr class="memdesc:adcf5e03e33505f67f3af93af20003cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the memebrs of the given Matchlist object.  <a href="matchlist_8c.html#adcf5e03e33505f67f3af93af20003cea">More...</a><br /></td></tr>
<tr class="separator:adcf5e03e33505f67f3af93af20003cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d136c3893f86c4693ded2f8f1756f15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#a4d136c3893f86c4693ded2f8f1756f15">show_matchlist</a> (<a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> matchlist)</td></tr>
<tr class="memdesc:a4d136c3893f86c4693ded2f8f1756f15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the entire contents of a Matchlist to stdout.  <a href="matchlist_8c.html#a4d136c3893f86c4693ded2f8f1756f15">More...</a><br /></td></tr>
<tr class="separator:a4d136c3893f86c4693ded2f8f1756f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a926180b42e5f8594158e50b7361b22f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#a926180b42e5f8594158e50b7361b22f4">show_matchlist_firstelements</a> (<a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> matchlist)</td></tr>
<tr class="memdesc:a926180b42e5f8594158e50b7361b22f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the first few elements of a matchlist to stderr.  <a href="matchlist_8c.html#a926180b42e5f8594158e50b7361b22f4">More...</a><br /></td></tr>
<tr class="separator:a926180b42e5f8594158e50b7361b22f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a794e90c60dc18409402211b8be91c0a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#a794e90c60dc18409402211b8be91c0a4">free_matchlist</a> (<a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *matchlist)</td></tr>
<tr class="memdesc:a794e90c60dc18409402211b8be91c0a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all the memory used within a matchlist, and re-initialises all its variables; null-safe.  <a href="matchlist_8c.html#a794e90c60dc18409402211b8be91c0a4">More...</a><br /></td></tr>
<tr class="separator:a794e90c60dc18409402211b8be91c0a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9deec5275acd681728d4708702ae5a8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#af9deec5275acd681728d4708702ae5a8">_swap_items</a> (int *v, int a, int b)</td></tr>
<tr class="separator:af9deec5275acd681728d4708702ae5a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e9d71754fad4f646f717c00488844c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#a07e9d71754fad4f646f717c00488844c">sort_matchlist</a> (<a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *ml)</td></tr>
<tr class="memdesc:a07e9d71754fad4f646f717c00488844c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort a matchlist in canonical order, i.e.  <a href="matchlist_8c.html#a07e9d71754fad4f646f717c00488844c">More...</a><br /></td></tr>
<tr class="separator:a07e9d71754fad4f646f717c00488844c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f8f2b240a70f266e7a7fda496ea90a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matchlist_8c.html#a11f8f2b240a70f266e7a7fda496ea90a">apply_setop_to_matchlist</a> (<a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *list1, <a class="el" href="matchlist_8h.html#a57e2c81ee4b97d815c769a1a2111acdc">MLSetOp</a> operation, <a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *list2)</td></tr>
<tr class="memdesc:a11f8f2b240a70f266e7a7fda496ea90a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a "set operation" on the two match lists (can be initial).  <a href="matchlist_8c.html#a11f8f2b240a70f266e7a7fda496ea90a">More...</a><br /></td></tr>
<tr class="separator:a11f8f2b240a70f266e7a7fda496ea90a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="af9deec5275acd681728d4708702ae5a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9deec5275acd681728d4708702ae5a8">&#9670;&nbsp;</a></span>_swap_items()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _swap_items </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="matchlist_8c.html#a07e9d71754fad4f646f717c00488844c">sort_matchlist()</a>.</p>

</div>
</div>
<a id="a11f8f2b240a70f266e7a7fda496ea90a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f8f2b240a70f266e7a7fda496ea90a">&#9670;&nbsp;</a></span>apply_setop_to_matchlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int apply_setop_to_matchlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *&#160;</td>
          <td class="paramname"><em>list1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#a57e2c81ee4b97d815c769a1a2111acdc">MLSetOp</a>&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *&#160;</td>
          <td class="paramname"><em>list2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a "set operation" on the two match lists (can be initial). </p>
<p>This is the main functionality provided for Matchlist object. The result of the operation is written to list1, which is modified destructively and may be reallocated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list1</td><td>first or only argument of the operation, will be overwritten with the result </td></tr>
    <tr><td class="paramname">operation</td><td>operation to apply; only Union, Reduce and Complement are properly supported and used by other CQP code so far </td></tr>
    <tr><td class="paramname">list2</td><td>optional second argument of the operation</td></tr>
  </table>
  </dd>
</dl>
<p><b>Here Be Dragons</b></p><ul>
<li>implementation of Intersection and Unique is dubious and likely buggy (and will produce wrong results for inverted matchlists)</li>
<li>Union, Intersection and Unique assume that the matchlists are sorted (by increasing start position, then increasing end position) and will produce incorrect results otherwise; this was not documented anywhere in the source code!</li>
<li>this sort order is different from the one used by <code><a class="el" href="ranges_8c.html#a1ab410ce8460f2f5f41a4aac0e43faf0" title="Make sure that ranges are sorted in &#39;natural&#39; order (i.e.">RangeSort()</a></code> (which sorts longer matches first given the same start point); it is quite unclear what the expected canonical sort order thus is for named query results, and which parts of the CQP code rely on a particular sort order</li>
<li>Union is used by CQP to combine results from multiple evaluation passes with different starting points (in finite-state queries); for each pass the matchlist is sorted appropriately (with start = match anchor increasing by definition, and only a single match possible for each start position, hence sorting by end = matchend anchor is irrelevant); building up the joint matchlist with Union ensures that it is also sorted correctly</li>
<li>if the FSA simulation is changed so that start points of matches can be out of order or there can be multiple matches with the same start point, the matchlist has to be sorted before further processing; if there could be duplicate matches (with identical start and end points) they should be discarded by an additional Uniq operation (as they might confuse other operations)</li>
<li>TODO: implement a suitable Sort operation and revise Uniq, or implement a join SortUniq operation, possibly as a separate function rather than yet another set operator; this should be relatively straightforward if we don't mind allocating new vectors rather than modifying the existing ones in place (at the cost of considerable memory overhead)</li>
</ul>
<p><b>Some old notes:</b></p>
<p>TODO: this whole code is WRONG when one of the matchlists is inverted TODO: many operations expect that the matchlist(s) is/are consistently sorted, but don't specify the expected sort order</p>
<p>Fortunately, CQP only uses the operations Union, Reduce and Complement (only sensible for initial matchlists) so far, while Identity is used internally. Other operations may have been intended for matching the first pattern of a finite-state query with a MU-style algorithm, but clearly haven't been thought through at all. </p>

<p class="reference">References <a class="el" href="corpmanag_8c.html#a133d99a40e4b51fe8cad6362e8b4e737">access_corpus()</a>, <a class="el" href="cl_8h.html#a3b60fdde6a7c8fbc535efaf526dbcb78">ATT_POS</a>, <a class="el" href="cl_8h.html#a1fa2e2ab47bd2c689b68a78bdac22028">CDA_OK</a>, <a class="el" href="cdaccess_8c.html#af97f2ad4a69c7d0105f9cee4a51b29b8">cl_errno</a>, <a class="el" href="cl_8h.html#a9e15a3c725711d9effd623b2f3e225be">cl_free</a>, <a class="el" href="cl_8h.html#a4e4eccd789155123ab533ed0cecbecea">cl_malloc()</a>, <a class="el" href="cdaccess_8c.html#ae9db76b80522e91e2735414a079e952b">cl_max_cpos()</a>, <a class="el" href="attributes_8c.html#a7ac9cbb036a5408dbdfb8693989c93da">cl_new_attribute()</a>, <a class="el" href="cl_8h.html#a7480d6ea66599014088f218912ddb89f">cl_realloc()</a>, <a class="el" href="matchlist_8h.html#a4d573330ec7dc65b6a4bb9624374d417a477de256cc7c0352da3d343a7ec48257">Complement</a>, <a class="el" href="structcl.html#aca3a1fb765418f9b9b1d74051aa88667">cl::corpus</a>, <a class="el" href="cwb-globals_8h.html#a7d9534bf3e01d80713660744cfc44562">CWB_DEFAULT_ATT_NAME</a>, <a class="el" href="struct___matchlist.html#a5fccd2713eeb2915db0d8484e2b9bd77">_Matchlist::end</a>, <a class="el" href="matchlist_8c.html#a794e90c60dc18409402211b8be91c0a4">free_matchlist()</a>, <a class="el" href="matchlist_8h.html#a4d573330ec7dc65b6a4bb9624374d417a24f669631df31da9ebff42fc3b49b8df">Identity</a>, <a class="el" href="matchlist_8h.html#a4d573330ec7dc65b6a4bb9624374d417ac852ba2c20196516a8b943442128d21c">Intersection</a>, <a class="el" href="struct___matchlist.html#aee496ef583f57a209998af42057fb4d9">_Matchlist::is_inverted</a>, <a class="el" href="struct___matchlist.html#a59a847e88ef363f3328ac377b3220c25">_Matchlist::keyword_positions</a>, <a class="el" href="struct___matchlist.html#a4a39c3b3795df9e3e8e38aba660308ba">_Matchlist::matches_whole_corpus</a>, <a class="el" href="cl_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>, <a class="el" href="structevalenv.html#a71aad927471fe56ead5ff11b7bffb003">evalenv::query_corpus</a>, <a class="el" href="matchlist_8h.html#a4d573330ec7dc65b6a4bb9624374d417a09fc96752855892343a3ec4bb6291c80">Reduce</a>, <a class="el" href="struct___matchlist.html#ad54a35243a6782fc034de0eed398eeaf">_Matchlist::start</a>, <a class="el" href="struct___matchlist.html#a148f69d27122888cf958f4aa979bbe95">_Matchlist::tabsize</a>, <a class="el" href="struct___matchlist.html#a3b2128b6a9aa23f1462b93176bad3596">_Matchlist::target_positions</a>, <a class="el" href="matchlist_8h.html#a4d573330ec7dc65b6a4bb9624374d417a8b8b090d04260fea32aac10ccc01175f">Union</a>, and <a class="el" href="matchlist_8h.html#a4d573330ec7dc65b6a4bb9624374d417a699b9ad2f87a9e68e8f442bcdbe034e2">Uniq</a>.</p>

<p class="reference">Referenced by <a class="el" href="eval_8c.html#a3228c2e7f03fb14bb92a42e2379e6988">calculate_initial_matchlist()</a>, <a class="el" href="eval_8c.html#aed3a1ce11b926d01cb1e2dedd35b893f">calculate_initial_matchlist_1()</a>, <a class="el" href="eval_8c.html#a8040881844328772004bc1980c4fea1a">cqp_run_mu_query()</a>, <a class="el" href="eval_8c.html#a57a4baba0cdd875da982a233996ae7de">cqp_run_tab_query()</a>, <a class="el" href="eval_8c.html#a5ce15f8bbb004c85cb075b05ae805988">eval_mu_tree()</a>, <a class="el" href="eval_8c.html#a9e0cee26d1f64c89d9f97b56139df6be">match_first_pattern()</a>, <a class="el" href="eval_8c.html#ad41fc17e5b92cd542d15dad8da449447">run_standard_query_dfa()</a>, and <a class="el" href="tree_8c.html#a28175b9d3283db5580269676c3f60b9c">try_optimization()</a>.</p>

</div>
</div>
<a id="a794e90c60dc18409402211b8be91c0a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a794e90c60dc18409402211b8be91c0a4">&#9670;&nbsp;</a></span>free_matchlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_matchlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *&#160;</td>
          <td class="paramname"><em>matchlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all the memory used within a matchlist, and re-initialises all its variables; null-safe. </p>

<p class="reference">References <a class="el" href="cl_8h.html#a9e15a3c725711d9effd623b2f3e225be">cl_free</a>, <a class="el" href="struct___matchlist.html#a5fccd2713eeb2915db0d8484e2b9bd77">_Matchlist::end</a>, <a class="el" href="matchlist_8c.html#adcf5e03e33505f67f3af93af20003cea">init_matchlist()</a>, <a class="el" href="struct___matchlist.html#a59a847e88ef363f3328ac377b3220c25">_Matchlist::keyword_positions</a>, <a class="el" href="struct___matchlist.html#ad54a35243a6782fc034de0eed398eeaf">_Matchlist::start</a>, and <a class="el" href="struct___matchlist.html#a3b2128b6a9aa23f1462b93176bad3596">_Matchlist::target_positions</a>.</p>

<p class="reference">Referenced by <a class="el" href="matchlist_8c.html#a11f8f2b240a70f266e7a7fda496ea90a">apply_setop_to_matchlist()</a>, <a class="el" href="eval_8c.html#aed3a1ce11b926d01cb1e2dedd35b893f">calculate_initial_matchlist_1()</a>, <a class="el" href="eval_8c.html#abceff38cbdce7027f1aea8ab3abca608">check_alignment_constraints()</a>, <a class="el" href="eval_8c.html#a8040881844328772004bc1980c4fea1a">cqp_run_mu_query()</a>, <a class="el" href="eval_8c.html#a57a4baba0cdd875da982a233996ae7de">cqp_run_tab_query()</a>, <a class="el" href="eval_8c.html#a5ce15f8bbb004c85cb075b05ae805988">eval_mu_tree()</a>, <a class="el" href="eval_8c.html#ad41fc17e5b92cd542d15dad8da449447">run_standard_query_dfa()</a>, <a class="el" href="eval_8c.html#a1b631f78bc5c3d5e5f62f03002373fdb">simulate()</a>, and <a class="el" href="tree_8c.html#a28175b9d3283db5580269676c3f60b9c">try_optimization()</a>.</p>

</div>
</div>
<a id="adcf5e03e33505f67f3af93af20003cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf5e03e33505f67f3af93af20003cea">&#9670;&nbsp;</a></span>init_matchlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_matchlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *&#160;</td>
          <td class="paramname"><em>matchlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the memebrs of the given Matchlist object. </p>

<p class="reference">References <a class="el" href="struct___matchlist.html#a5fccd2713eeb2915db0d8484e2b9bd77">_Matchlist::end</a>, <a class="el" href="struct___matchlist.html#aee496ef583f57a209998af42057fb4d9">_Matchlist::is_inverted</a>, <a class="el" href="struct___matchlist.html#a59a847e88ef363f3328ac377b3220c25">_Matchlist::keyword_positions</a>, <a class="el" href="struct___matchlist.html#a4a39c3b3795df9e3e8e38aba660308ba">_Matchlist::matches_whole_corpus</a>, <a class="el" href="struct___matchlist.html#ad54a35243a6782fc034de0eed398eeaf">_Matchlist::start</a>, <a class="el" href="struct___matchlist.html#a148f69d27122888cf958f4aa979bbe95">_Matchlist::tabsize</a>, and <a class="el" href="struct___matchlist.html#a3b2128b6a9aa23f1462b93176bad3596">_Matchlist::target_positions</a>.</p>

<p class="reference">Referenced by <a class="el" href="eval_8c.html#aed3a1ce11b926d01cb1e2dedd35b893f">calculate_initial_matchlist_1()</a>, <a class="el" href="eval_8c.html#abceff38cbdce7027f1aea8ab3abca608">check_alignment_constraints()</a>, <a class="el" href="eval_8c.html#a8040881844328772004bc1980c4fea1a">cqp_run_mu_query()</a>, <a class="el" href="eval_8c.html#a57a4baba0cdd875da982a233996ae7de">cqp_run_tab_query()</a>, <a class="el" href="eval_8c.html#a5ce15f8bbb004c85cb075b05ae805988">eval_mu_tree()</a>, <a class="el" href="matchlist_8c.html#a794e90c60dc18409402211b8be91c0a4">free_matchlist()</a>, <a class="el" href="eval_8c.html#ad41fc17e5b92cd542d15dad8da449447">run_standard_query_dfa()</a>, and <a class="el" href="tree_8c.html#a28175b9d3283db5580269676c3f60b9c">try_optimization()</a>.</p>

</div>
</div>
<a id="a4d136c3893f86c4693ded2f8f1756f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d136c3893f86c4693ded2f8f1756f15">&#9670;&nbsp;</a></span>show_matchlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_matchlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a>&#160;</td>
          <td class="paramname"><em>matchlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the entire contents of a Matchlist to stdout. </p>

<p class="reference">References <a class="el" href="struct___matchlist.html#a5fccd2713eeb2915db0d8484e2b9bd77">_Matchlist::end</a>, <a class="el" href="struct___matchlist.html#aee496ef583f57a209998af42057fb4d9">_Matchlist::is_inverted</a>, <a class="el" href="struct___matchlist.html#a59a847e88ef363f3328ac377b3220c25">_Matchlist::keyword_positions</a>, <a class="el" href="struct___matchlist.html#ad54a35243a6782fc034de0eed398eeaf">_Matchlist::start</a>, <a class="el" href="struct___matchlist.html#a148f69d27122888cf958f4aa979bbe95">_Matchlist::tabsize</a>, and <a class="el" href="struct___matchlist.html#a3b2128b6a9aa23f1462b93176bad3596">_Matchlist::target_positions</a>.</p>

<p class="reference">Referenced by <a class="el" href="eval_8c.html#ad41fc17e5b92cd542d15dad8da449447">run_standard_query_dfa()</a>.</p>

</div>
</div>
<a id="a926180b42e5f8594158e50b7361b22f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a926180b42e5f8594158e50b7361b22f4">&#9670;&nbsp;</a></span>show_matchlist_firstelements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_matchlist_firstelements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a>&#160;</td>
          <td class="paramname"><em>matchlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the first few elements of a matchlist to stderr. </p>
<p>"First few" equals up to 1000.</p>
<p>Only the start positions are printed. </p>

<p class="reference">References <a class="el" href="struct___matchlist.html#ad54a35243a6782fc034de0eed398eeaf">_Matchlist::start</a>, and <a class="el" href="struct___matchlist.html#a148f69d27122888cf958f4aa979bbe95">_Matchlist::tabsize</a>.</p>

<p class="reference">Referenced by <a class="el" href="eval_8c.html#ad41fc17e5b92cd542d15dad8da449447">run_standard_query_dfa()</a>.</p>

</div>
</div>
<a id="a07e9d71754fad4f646f717c00488844c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e9d71754fad4f646f717c00488844c">&#9670;&nbsp;</a></span>sort_matchlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sort_matchlist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="matchlist_8h.html#ade5a2cd7adab93a049d93f6d1648723e">Matchlist</a> *&#160;</td>
          <td class="paramname"><em>ml</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sort a matchlist in canonical order, i.e. </p>
<p>by increasing start and end position.</p>
<p>The sort operation is carried out in-place, modifying the function argument. Currently, a bubblesort algorithm is used which doesn't need to allocate scratch memory. While it has bad worst-case complexity, the typical use case (reordering matches from a single pass of a finite-state query) will only contain a small number of local inversions (if any) and allows the bubblesort to stop early.</p>
<p>"Special" matchlist (i.e. initial matchlist without end positions, ml-&gt;is_inverted, ml-&gt;matches_while_corpus) are not allowed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ml</td><td>matchlist to be sorted (must not be initial or inverted) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the sort operation was successful </dd></dl>

<p class="reference">References <a class="el" href="matchlist_8c.html#af9deec5275acd681728d4708702ae5a8">_swap_items()</a>, <a class="el" href="output_8c.html#a593fc12047ccf79f2e3b6b29e32988f0">cqpmessage()</a>, <a class="el" href="struct___matchlist.html#a5fccd2713eeb2915db0d8484e2b9bd77">_Matchlist::end</a>, <a class="el" href="output_8h.html#a9c2eeea9cd09fb001747ef4cc99399a4a4dfd42ec49d09d8c6555c218301cc30f">Error</a>, <a class="el" href="cqp_8h.html#a306ebd41c0cd1303b1372c6153f0caf8">False</a>, <a class="el" href="struct___matchlist.html#aee496ef583f57a209998af42057fb4d9">_Matchlist::is_inverted</a>, <a class="el" href="struct___matchlist.html#a59a847e88ef363f3328ac377b3220c25">_Matchlist::keyword_positions</a>, <a class="el" href="struct___matchlist.html#a4a39c3b3795df9e3e8e38aba660308ba">_Matchlist::matches_whole_corpus</a>, <a class="el" href="struct___matchlist.html#ad54a35243a6782fc034de0eed398eeaf">_Matchlist::start</a>, <a class="el" href="struct___matchlist.html#a148f69d27122888cf958f4aa979bbe95">_Matchlist::tabsize</a>, <a class="el" href="struct___matchlist.html#a3b2128b6a9aa23f1462b93176bad3596">_Matchlist::target_positions</a>, and <a class="el" href="cqp_8h.html#add3ca9eefe3b5b754426f51d3043e579">True</a>.</p>

<p class="reference">Referenced by <a class="el" href="eval_8c.html#ad41fc17e5b92cd542d15dad8da449447">run_standard_query_dfa()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_caf978792d6b0705158f044348baeba4.html">cqp</a></li><li class="navelem"><a class="el" href="matchlist_8c.html">matchlist.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
