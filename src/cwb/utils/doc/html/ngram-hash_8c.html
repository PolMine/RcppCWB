<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CWB: cl/ngram-hash.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CWB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0b9712b4d566c131b10613af70a8e558.html">cl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ngram-hash.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="globals_8h.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lexhash_8h.html">lexhash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ngram-hash_8h.html">ngram-hash.h</a>&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__cl__ngram__hash.html">_cl_ngram_hash</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">TODO: consider alternative hash functions (see <a class="el" href="lexhash_8h.html">cl/lexhash.h</a>)  <a href="struct__cl__ngram__hash.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa6f810c5bcfe8eaba4aa5d527bafb9cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#aa6f810c5bcfe8eaba4aa5d527bafb9cf">DEFAULT_NR_OF_BUCKETS</a>&#160;&#160;&#160;250000</td></tr>
<tr class="memdesc:aa6f810c5bcfe8eaba4aa5d527bafb9cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the default number of buckets in an n-gram hash.  <a href="#aa6f810c5bcfe8eaba4aa5d527bafb9cf">More...</a><br /></td></tr>
<tr class="separator:aa6f810c5bcfe8eaba4aa5d527bafb9cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26eb4580cea5c017fead4a56a81c897d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a26eb4580cea5c017fead4a56a81c897d">DEFAULT_FILLRATE_LIMIT</a>(n)&#160;&#160;&#160;5.0</td></tr>
<tr class="memdesc:a26eb4580cea5c017fead4a56a81c897d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default parameters for auto-growing the table of buckets (.  <a href="#a26eb4580cea5c017fead4a56a81c897d">More...</a><br /></td></tr>
<tr class="separator:a26eb4580cea5c017fead4a56a81c897d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a382765f142fac4977de72a610b64f073"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a382765f142fac4977de72a610b64f073">DEFAULT_FILLRATE_TARGET</a>(n)&#160;&#160;&#160;1.0</td></tr>
<tr class="memdesc:a382765f142fac4977de72a610b64f073"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep memory overhead for bucket table below 50%  <a href="#a382765f142fac4977de72a610b64f073">More...</a><br /></td></tr>
<tr class="separator:a382765f142fac4977de72a610b64f073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8248b2163254d89a3b59892d9cd95750"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a8248b2163254d89a3b59892d9cd95750">MAX_BUCKETS</a>&#160;&#160;&#160;1000000007</td></tr>
<tr class="memdesc:a8248b2163254d89a3b59892d9cd95750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of buckets n-gram hash will try to allocate when auto-growing.  <a href="#a8248b2163254d89a3b59892d9cd95750">More...</a><br /></td></tr>
<tr class="separator:a8248b2163254d89a3b59892d9cd95750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30c77daca10f0c2b941969c01beedee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#ad30c77daca10f0c2b941969c01beedee">MAX_ENTRIES</a>&#160;&#160;&#160;2147483647</td></tr>
<tr class="memdesc:ad30c77daca10f0c2b941969c01beedee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of entries that can be stored in the n-gram hash.  <a href="#ad30c77daca10f0c2b941969c01beedee">More...</a><br /></td></tr>
<tr class="separator:ad30c77daca10f0c2b941969c01beedee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad6324b7647e83d71e70bb3f67ebd1a48"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#ad6324b7647e83d71e70bb3f67ebd1a48">hash_ngram</a> (int N, int *tuple)</td></tr>
<tr class="memdesc:ad6324b7647e83d71e70bb3f67ebd1a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes 32bit hash value for n-gram.  <a href="#ad6324b7647e83d71e70bb3f67ebd1a48">More...</a><br /></td></tr>
<tr class="separator:ad6324b7647e83d71e70bb3f67ebd1a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca3d675335201c79eacdeb769d524f3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#aca3d675335201c79eacdeb769d524f3b">cl_new_ngram_hash</a> (int N, int buckets)</td></tr>
<tr class="memdesc:aca3d675335201c79eacdeb769d524f3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new cl_ngram_hash object.  <a href="#aca3d675335201c79eacdeb769d524f3b">More...</a><br /></td></tr>
<tr class="separator:aca3d675335201c79eacdeb769d524f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456124023e066171be1fd4f14525e095"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a456124023e066171be1fd4f14525e095">cl_delete_ngram_hash</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash)</td></tr>
<tr class="memdesc:a456124023e066171be1fd4f14525e095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a cl_ngram_hash object.  <a href="#a456124023e066171be1fd4f14525e095">More...</a><br /></td></tr>
<tr class="separator:a456124023e066171be1fd4f14525e095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb91c15fc8aebc471395bf67f668a1cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#aeb91c15fc8aebc471395bf67f668a1cb">cl_ngram_hash_auto_grow</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int flag)</td></tr>
<tr class="memdesc:aeb91c15fc8aebc471395bf67f668a1cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns a cl_ngram_hash's ability to auto-grow on or off.  <a href="#aeb91c15fc8aebc471395bf67f668a1cb">More...</a><br /></td></tr>
<tr class="separator:aeb91c15fc8aebc471395bf67f668a1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a879992bf00a4c8124c6426415f604f06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a879992bf00a4c8124c6426415f604f06">cl_ngram_hash_auto_grow_fillrate</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, double limit, double target)</td></tr>
<tr class="memdesc:a879992bf00a4c8124c6426415f604f06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure auto-grow parameters.  <a href="#a879992bf00a4c8124c6426415f604f06">More...</a><br /></td></tr>
<tr class="separator:a879992bf00a4c8124c6426415f604f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e621006b67521321ffdd496b5f7db4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4">cl_ngram_hash_check_grow</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash)</td></tr>
<tr class="memdesc:ad8e621006b67521321ffdd496b5f7db4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grows a ngram_hash table, increasing the number of buckets, if necessary.  <a href="#ad8e621006b67521321ffdd496b5f7db4">More...</a><br /></td></tr>
<tr class="separator:ad8e621006b67521321ffdd496b5f7db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f8f861644659f214b707aad8c9feb5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5">cl_ngram_hash_find_i</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int *ngram, unsigned int *ret_offset)</td></tr>
<tr class="memdesc:a28f8f861644659f214b707aad8c9feb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the entry corresponding to a particular n-gram in a cl_ngram_hash.  <a href="#a28f8f861644659f214b707aad8c9feb5">More...</a><br /></td></tr>
<tr class="separator:a28f8f861644659f214b707aad8c9feb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58244f9755e13c8784d75e36fc5a685"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#aa58244f9755e13c8784d75e36fc5a685">cl_ngram_hash_find</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int *ngram)</td></tr>
<tr class="memdesc:aa58244f9755e13c8784d75e36fc5a685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the entry corresponding to a particular n-gram within a cl_ngram_hash.  <a href="#aa58244f9755e13c8784d75e36fc5a685">More...</a><br /></td></tr>
<tr class="separator:aa58244f9755e13c8784d75e36fc5a685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25353826cfbfc553cffcadef494d3e05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a25353826cfbfc553cffcadef494d3e05">cl_ngram_hash_add</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int *ngram, unsigned int f)</td></tr>
<tr class="memdesc:a25353826cfbfc553cffcadef494d3e05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an n-gram to a cl_ngram_hash table.  <a href="#a25353826cfbfc553cffcadef494d3e05">More...</a><br /></td></tr>
<tr class="separator:a25353826cfbfc553cffcadef494d3e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c6d1516252a8db14568cef2ea1cc06d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a9c6d1516252a8db14568cef2ea1cc06d">cl_ngram_hash_freq</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int *ngram)</td></tr>
<tr class="memdesc:a9c6d1516252a8db14568cef2ea1cc06d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the frequency of a particular n-gram within a cl_ngram_hash.  <a href="#a9c6d1516252a8db14568cef2ea1cc06d">More...</a><br /></td></tr>
<tr class="separator:a9c6d1516252a8db14568cef2ea1cc06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dd48639ee556deb9b697f8c30976113"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a4dd48639ee556deb9b697f8c30976113">cl_ngram_hash_del</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int *ngram)</td></tr>
<tr class="memdesc:a4dd48639ee556deb9b697f8c30976113"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an n-gram from a hash.  <a href="#a4dd48639ee556deb9b697f8c30976113">More...</a><br /></td></tr>
<tr class="separator:a4dd48639ee556deb9b697f8c30976113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a7198d2a3bf6aaf5ee3d7242aa2c81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a99a7198d2a3bf6aaf5ee3d7242aa2c81">cl_ngram_hash_size</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash)</td></tr>
<tr class="memdesc:a99a7198d2a3bf6aaf5ee3d7242aa2c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the number of distinct n-grams stored in a cl_ngram_hash.  <a href="#a99a7198d2a3bf6aaf5ee3d7242aa2c81">More...</a><br /></td></tr>
<tr class="separator:a99a7198d2a3bf6aaf5ee3d7242aa2c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c75f1f0012b78b0844a11a6e7c6450"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#ac6c75f1f0012b78b0844a11a6e7c6450">cl_ngram_hash_get_entries</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int *ret_size)</td></tr>
<tr class="memdesc:ac6c75f1f0012b78b0844a11a6e7c6450"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an array of all entries in an n-gram hash.  <a href="#ac6c75f1f0012b78b0844a11a6e7c6450">More...</a><br /></td></tr>
<tr class="separator:ac6c75f1f0012b78b0844a11a6e7c6450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a499b310c5822eb54832b1a6b891bfa0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a499b310c5822eb54832b1a6b891bfa0c">cl_ngram_hash_iterator_reset</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash)</td></tr>
<tr class="memdesc:a499b310c5822eb54832b1a6b891bfa0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over all entries in an n-gram hash.  <a href="#a499b310c5822eb54832b1a6b891bfa0c">More...</a><br /></td></tr>
<tr class="separator:a499b310c5822eb54832b1a6b891bfa0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438e04d8b35cc454428732b72753a1b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a438e04d8b35cc454428732b72753a1b4">cl_ngram_hash_iterator_next</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash)</td></tr>
<tr class="memdesc:a438e04d8b35cc454428732b72753a1b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over all entries in an n-gram hash.  <a href="#a438e04d8b35cc454428732b72753a1b4">More...</a><br /></td></tr>
<tr class="separator:a438e04d8b35cc454428732b72753a1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c71fc6cf3d13bb953435924d2cbdac"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a01c71fc6cf3d13bb953435924d2cbdac">cl_ngram_hash_stats</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int max_n)</td></tr>
<tr class="memdesc:a01c71fc6cf3d13bb953435924d2cbdac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute statistics on bucket fill rates (for debugging and optimization).  <a href="#a01c71fc6cf3d13bb953435924d2cbdac">More...</a><br /></td></tr>
<tr class="separator:a01c71fc6cf3d13bb953435924d2cbdac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bd2ffc179aa153f123f26ddfa5bd313"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngram-hash_8c.html#a3bd2ffc179aa153f123f26ddfa5bd313">cl_ngram_hash_print_stats</a> (<a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> hash, int max_n)</td></tr>
<tr class="memdesc:a3bd2ffc179aa153f123f26ddfa5bd313"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display statistics on bucket fill rates (for debugging and optimization).  <a href="#a3bd2ffc179aa153f123f26ddfa5bd313">More...</a><br /></td></tr>
<tr class="separator:a3bd2ffc179aa153f123f26ddfa5bd313"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a26eb4580cea5c017fead4a56a81c897d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_FILLRATE_LIMIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n</td><td>)</td>
          <td>&#160;&#160;&#160;5.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default parameters for auto-growing the table of buckets (. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ngram-hash_8c.html#a879992bf00a4c8124c6426415f604f06" title="Configure auto-grow parameters. ">cl_ngram_hash_auto_grow_fillrate</a> for details). </dd></dl>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#aca3d675335201c79eacdeb769d524f3b">cl_new_ngram_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="a382765f142fac4977de72a610b64f073"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_FILLRATE_TARGET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n</td><td>)</td>
          <td>&#160;&#160;&#160;1.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>keep memory overhead for bucket table below 50% </p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#aca3d675335201c79eacdeb769d524f3b">cl_new_ngram_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6f810c5bcfe8eaba4aa5d527bafb9cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_NR_OF_BUCKETS&#160;&#160;&#160;250000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the default number of buckets in an n-gram hash. </p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#aca3d675335201c79eacdeb769d524f3b">cl_new_ngram_hash()</a>.</p>

</div>
</div>
<a class="anchor" id="a8248b2163254d89a3b59892d9cd95750"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BUCKETS&#160;&#160;&#160;1000000007</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of buckets n-gram hash will try to allocate when auto-growing. </p>
<p>1 billion (incremented to next prime number) </p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4">cl_ngram_hash_check_grow()</a>.</p>

</div>
</div>
<a class="anchor" id="ad30c77daca10f0c2b941969c01beedee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ENTRIES&#160;&#160;&#160;2147483647</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of entries that can be stored in the n-gram hash. </p>
<p>2^31 - 1 </p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#a25353826cfbfc553cffcadef494d3e05">cl_ngram_hash_add()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a456124023e066171be1fd4f14525e095"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_delete_ngram_hash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a cl_ngram_hash object. </p>
<p>This deletes all the entries in all the buckets in the ngram_hash, plus the cl_ngram_hash itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The cl_ngram_hash to delete. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="cl_8h.html#a9e15a3c725711d9effd623b2f3e225be">cl_free</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>.</p>

</div>
</div>
<a class="anchor" id="aca3d675335201c79eacdeb769d524f3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a> cl_new_ngram_hash </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buckets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new cl_ngram_hash object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">N</td><td>N-gram size </td></tr>
    <tr><td class="paramname">buckets</td><td>The number of buckets in the newly-created cl_ngram_hash; set to 0 to use the default number of buckets. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new cl_ngram_hash. </dd></dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#ac3cf5e46d2c8377c553d7e583884511d">_cl_ngram_hash::auto_grow</a>, <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="cl_8h.html#a5b756594ae431fd5ec0ffbdc77db1e64">cl_calloc()</a>, <a class="el" href="cl_8h.html#a4e4eccd789155123ab533ed0cecbecea">cl_malloc()</a>, <a class="el" href="ngram-hash_8c.html#a26eb4580cea5c017fead4a56a81c897d">DEFAULT_FILLRATE_LIMIT</a>, <a class="el" href="ngram-hash_8c.html#a382765f142fac4977de72a610b64f073">DEFAULT_FILLRATE_TARGET</a>, <a class="el" href="ngram-hash_8c.html#aa6f810c5bcfe8eaba4aa5d527bafb9cf">DEFAULT_NR_OF_BUCKETS</a>, <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>, <a class="el" href="struct__cl__ngram__hash.html#acbc151a87daa7767dab0524a78558097">_cl_ngram_hash::fillrate_limit</a>, <a class="el" href="struct__cl__ngram__hash.html#a05e3bba5b365ce25db801510c570f3cc">_cl_ngram_hash::fillrate_target</a>, <a class="el" href="lexhash_8c.html#a6bb4d75c3e8354cff3efd98002335877">find_prime()</a>, <a class="el" href="struct__cl__ngram__hash.html#ac3061c63dec6a5ee2a1594c0de8ac365">_cl_ngram_hash::iter_bucket</a>, <a class="el" href="struct__cl__ngram__hash.html#a5e14daa20ab4f7ce3eb9181b7b31c9fe">_cl_ngram_hash::iter_point</a>, <a class="el" href="struct__cl__ngram__hash.html#a7722c8ecbb62d99aee7ce68b1752f337">_cl_ngram_hash::N</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4">cl_ngram_hash_check_grow()</a>, <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>, and <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a25353826cfbfc553cffcadef494d3e05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a> cl_ngram_hash_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ngram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds an n-gram to a cl_ngram_hash table. </p>
<p>If the n-gram is already in the hash, its frequency count is increased by the specified value f.</p>
<p>Otherwise, a new entry is created and its frequency count is set to f. The n-gram is embedded in the new hash entry, so the original array does not need to be kept in memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash table to add to. </td></tr>
    <tr><td class="paramname">ngram</td><td>The n-gram to add. </td></tr>
    <tr><td class="paramname">f</td><td>Frequency count of the n-gram. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a (new or existing) entry </dd></dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#ac3cf5e46d2c8377c553d7e583884511d">_cl_ngram_hash::auto_grow</a>, <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="cl_8h.html#a4e4eccd789155123ab533ed0cecbecea">cl_malloc()</a>, <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4">cl_ngram_hash_check_grow()</a>, <a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5">cl_ngram_hash_find_i()</a>, <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>, <a class="el" href="struct__cl__ngram__hash.html#acbc151a87daa7767dab0524a78558097">_cl_ngram_hash::fillrate_limit</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#ada8140e33c3fd1e2eceba4c71f0e9ded">_cl_ngram_hash_entry::freq</a>, <a class="el" href="ngram-hash_8c.html#ad30c77daca10f0c2b941969c01beedee">MAX_ENTRIES</a>, <a class="el" href="struct__cl__ngram__hash.html#a7722c8ecbb62d99aee7ce68b1752f337">_cl_ngram_hash::N</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a1147666a934dc2ae0846467161f7efce">_cl_ngram_hash_entry::ngram</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>, and <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="aeb91c15fc8aebc471395bf67f668a1cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_ngram_hash_auto_grow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns a cl_ngram_hash's ability to auto-grow on or off. </p>
<p>When this setting is switched on, the ngram_hash will grow automatically to avoid performance degradation.</p>
<p>Note the default value for this setting is SWITCHED ON.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ngram-hash_8c.html#a879992bf00a4c8124c6426415f604f06" title="Configure auto-grow parameters. ">cl_ngram_hash_auto_grow_fillrate</a>, <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4" title="Grows a ngram_hash table, increasing the number of buckets, if necessary. ">cl_ngram_hash_check_grow</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash that will be affected. </td></tr>
    <tr><td class="paramname">flag</td><td>New value for autogrow setting: boolean where true is on and false is off. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#ac3cf5e46d2c8377c553d7e583884511d">_cl_ngram_hash::auto_grow</a>.</p>

<p>Referenced by <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a879992bf00a4c8124c6426415f604f06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_ngram_hash_auto_grow_fillrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure auto-grow parameters. </p>
<p>These settings are only relevant if auto-growing is enabled.</p>
<p>The decision to expand the bucket table of a ngram_hash is based on its fill rate, i.e. the average number of entries in each bucket. Under normal circumstances, this value corresponds to the average number of comparisons required to insert a new entry into the hash (locating an existing value should require roughly half as many comparisons).</p>
<p>Auto-growing is triggered if the fill rate exceeds a specified limit. The new number of buckets is chosen so that the fill rate after expansion corresponds to the specified target value.</p>
<p>The two fill rate parameters represent a trade-off between memory overhead (8 bytes for each bucket) and performance (average number of entries that have been checked for each hash access), which depends crucially on the value of N (i.e. n-gram size).</p>
<p>For N=1, a bucket table with low fill rate incurs a substantial memory overhead, which may even exceed the storage required for the entries themselves. For large N, the relative memory overhead is much smaller, while checking the list of entries in a bucket becomes more expensive (N integer comparisons for each item).</p>
<p>Note that the ratio limit / target determines how often the bucket table has to be reallocated; it should not be smaller than 4.0.</p>
<p>A reasonable values for the fill rate limit seems to be around 5.0; if speed is crucial, N is relatively large, and memory footprint isn't a concern, smaller values down to 2.0 might be chosen. The target fill rate should not be set too low for small N. If N=1, a target fill rate of 0.5 results in 100% memory overhead after expansion of the bucket table (16 bytes per entry vs. 8 bytes each for twice as many buckets as there are entries).</p>
<p>When working on very large data sets, it is recommended to disable auto-grow and initialise the n-gram hash with a sufficiently large number of buckets.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ngram-hash_8c.html#aeb91c15fc8aebc471395bf67f668a1cb" title="Turns a cl_ngram_hash&#39;s ability to auto-grow on or off. ">cl_ngram_hash_auto_grow</a>, <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4" title="Grows a ngram_hash table, increasing the number of buckets, if necessary. ">cl_ngram_hash_check_grow</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash that will be affected. </td></tr>
    <tr><td class="paramname">limit</td><td>Fill rate limit, which triggers expansion of the n-gram hash </td></tr>
    <tr><td class="paramname">target</td><td>Target fill rate after expansion (determines new number of buckets) </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#acbc151a87daa7767dab0524a78558097">_cl_ngram_hash::fillrate_limit</a>, and <a class="el" href="struct__cl__ngram__hash.html#a05e3bba5b365ce25db801510c570f3cc">_cl_ngram_hash::fillrate_target</a>.</p>

</div>
</div>
<a class="anchor" id="ad8e621006b67521321ffdd496b5f7db4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_ngram_hash_check_grow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Grows a ngram_hash table, increasing the number of buckets, if necessary. </p>
<p>This functions is called after inserting a new entry into the n-gram hash. If checks whether the current fill rate exceeds the specified limit. If this is the case, and auto_grow is enabled, then the hash is expanded by increasing the number of buckets, such that the new average fill rate corresponds to the specified target value. This gives the hash better performance and makes it capable of absorbing more keys.</p>
<p>If the bucket table would be expanded to more than MAX_BUCKETS entries, auto-grow is automatically disabled for this ngram_hash.</p>
<p>Note: this function also implements the hashing algorithm and must be consistent with <a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5" title="Finds the entry corresponding to a particular n-gram in a cl_ngram_hash. ">cl_ngram_hash_find_i()</a>.</p>
<p>Usage: expanded = <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4" title="Grows a ngram_hash table, increasing the number of buckets, if necessary. ">cl_ngram_hash_check_grow(cl_ngram_hash hash)</a>;</p>
<p>This is a non-exported function.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ngram-hash_8c.html#aeb91c15fc8aebc471395bf67f668a1cb" title="Turns a cl_ngram_hash&#39;s ability to auto-grow on or off. ">cl_ngram_hash_auto_grow</a>, <a class="el" href="ngram-hash_8c.html#a879992bf00a4c8124c6426415f604f06" title="Configure auto-grow parameters. ">cl_ngram_hash_auto_grow_fillrate</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The cl_ngram_hash to autogrow. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always 0. </dd></dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#ac3cf5e46d2c8377c553d7e583884511d">_cl_ngram_hash::auto_grow</a>, <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="globals_8c.html#a5c4290325b240eac5fe1542a8743286a">cl_debug</a>, <a class="el" href="cl_8h.html#a9e15a3c725711d9effd623b2f3e225be">cl_free</a>, <a class="el" href="ngram-hash_8c.html#aca3d675335201c79eacdeb769d524f3b">cl_new_ngram_hash()</a>, <a class="el" href="ngram-hash_8c.html#a3bd2ffc179aa153f123f26ddfa5bd313">cl_ngram_hash_print_stats()</a>, <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>, <a class="el" href="struct__cl__ngram__hash.html#acbc151a87daa7767dab0524a78558097">_cl_ngram_hash::fillrate_limit</a>, <a class="el" href="struct__cl__ngram__hash.html#a05e3bba5b365ce25db801510c570f3cc">_cl_ngram_hash::fillrate_target</a>, <a class="el" href="ngram-hash_8c.html#ad6324b7647e83d71e70bb3f67ebd1a48">hash_ngram()</a>, <a class="el" href="ngram-hash_8c.html#a8248b2163254d89a3b59892d9cd95750">MAX_BUCKETS</a>, <a class="el" href="struct__cl__ngram__hash.html#a7722c8ecbb62d99aee7ce68b1752f337">_cl_ngram_hash::N</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a1147666a934dc2ae0846467161f7efce">_cl_ngram_hash_entry::ngram</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#a25353826cfbfc553cffcadef494d3e05">cl_ngram_hash_add()</a>.</p>

</div>
</div>
<a class="anchor" id="a4dd48639ee556deb9b697f8c30976113"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_ngram_hash_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ngram</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an n-gram from a hash. </p>
<p>The entry corresponding to the specified n-gram is removed from the cl_ngram_hash. If the n-gram is not in the hash to begin with, no action is taken.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash to alter. </td></tr>
    <tr><td class="paramname">ngram</td><td>The n-gram to remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The frequency of the deleted entry (0 if not found). </dd></dl>

<p>References <a class="el" href="cl_8h.html#a9e15a3c725711d9effd623b2f3e225be">cl_free</a>, <a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5">cl_ngram_hash_find_i()</a>, <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#ada8140e33c3fd1e2eceba4c71f0e9ded">_cl_ngram_hash_entry::freq</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

</div>
</div>
<a class="anchor" id="aa58244f9755e13c8784d75e36fc5a685"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a> cl_ngram_hash_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ngram</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the entry corresponding to a particular n-gram within a cl_ngram_hash. </p>
<p>This function is basically a wrapper around the internal function cl_ngram_hash_find_i.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5" title="Finds the entry corresponding to a particular n-gram in a cl_ngram_hash. ">cl_ngram_hash_find_i</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash to search. </td></tr>
    <tr><td class="paramname">n-gram</td><td>The n-gram to look for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The entry that is found (or NULL if the n-gram is not in the hash). </dd></dl>

<p>References <a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5">cl_ngram_hash_find_i()</a>.</p>

</div>
</div>
<a class="anchor" id="a28f8f861644659f214b707aad8c9feb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a> cl_ngram_hash_find_i </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ngram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>ret_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the entry corresponding to a particular n-gram in a cl_ngram_hash. </p>
<p>This function is the same as <a class="el" href="ngram-hash_8c.html#aa58244f9755e13c8784d75e36fc5a685" title="Finds the entry corresponding to a particular n-gram within a cl_ngram_hash. ">cl_ngram_hash_find()</a>, but *ret_offset is set to the hashtable offset computed for token (i.e. the index of the bucket within the hashtable), unless *ret_offset == NULL.</p>
<p>Note that this function hides the hashing algorithm details from the rest of the n-gram hash implementation (except cl_ngram_hash_check_grow, which re-implements the hashing algorithm for performance reasons).</p>
<p>Usage: entry = cl_ngram_hash_find_i(cl_ngram_hash hash, char *token, unsigned int *ret_offset);</p>
<p>This is a non-exported function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash to search. </td></tr>
    <tr><td class="paramname">ngram</td><td>The ngram to look for. </td></tr>
    <tr><td class="paramname">ret_offset</td><td>This integer address will be filled with the token's hashtable offset (can be NULL, in which case, ignored). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The entry that is found (or NULL if the string is not in the hash). </dd></dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="ngram-hash_8c.html#ad6324b7647e83d71e70bb3f67ebd1a48">hash_ngram()</a>, <a class="el" href="struct__cl__ngram__hash.html#a7722c8ecbb62d99aee7ce68b1752f337">_cl_ngram_hash::N</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a1147666a934dc2ae0846467161f7efce">_cl_ngram_hash_entry::ngram</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#a25353826cfbfc553cffcadef494d3e05">cl_ngram_hash_add()</a>, <a class="el" href="ngram-hash_8c.html#a4dd48639ee556deb9b697f8c30976113">cl_ngram_hash_del()</a>, <a class="el" href="ngram-hash_8c.html#aa58244f9755e13c8784d75e36fc5a685">cl_ngram_hash_find()</a>, and <a class="el" href="ngram-hash_8c.html#a9c6d1516252a8db14568cef2ea1cc06d">cl_ngram_hash_freq()</a>.</p>

</div>
</div>
<a class="anchor" id="a9c6d1516252a8db14568cef2ea1cc06d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_ngram_hash_freq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ngram</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the frequency of a particular n-gram within a cl_ngram_hash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash to look in. </td></tr>
    <tr><td class="paramname">ngram</td><td>The ngram to look for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The frequency of that n-gram, or 0 if it is not in the hash </dd></dl>

<p>References <a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5">cl_ngram_hash_find_i()</a>, and <a class="el" href="struct__cl__ngram__hash__entry.html#ada8140e33c3fd1e2eceba4c71f0e9ded">_cl_ngram_hash_entry::freq</a>.</p>

<p>Referenced by <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6c75f1f0012b78b0844a11a6e7c6450"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a>* cl_ngram_hash_get_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ret_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an array of all entries in an n-gram hash. </p>
<p>Returns allocated vector of pointers to all entries of the n-gram hash.</p>
<p>This function returns a newly allocated array of cl_ngram_hash_entry pointers enumerating all entries of the hash in an unspecified order.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The n-gram hash to operate on. </td></tr>
    <tr><td class="paramname">ret_size</td><td>If not NULL, the number of entries in the returned array will be stored in this location. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="cl_8h.html#a4e4eccd789155123ab533ed0cecbecea">cl_malloc()</a>, <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

</div>
</div>
<a class="anchor" id="a438e04d8b35cc454428732b72753a1b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cl_8h.html#a2ea28e56c22fa6447f39fd41033e58cd">cl_ngram_hash_entry</a> cl_ngram_hash_iterator_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate over all entries in an n-gram hash. </p>
<p>Note that there is only a single iterator for each cl_ngram_hash object, so different parts of the application code must not try to iterate through the hash at the same time.</p>
<p>This function returns the next entry from the hash, or NULL if there are no more entries. Keep in mind that the hash is traversed in an unspecified order.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The n-gram hash to iterate over. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="struct__cl__ngram__hash.html#ac3061c63dec6a5ee2a1594c0de8ac365">_cl_ngram_hash::iter_bucket</a>, <a class="el" href="struct__cl__ngram__hash.html#a5e14daa20ab4f7ce3eb9181b7b31c9fe">_cl_ngram_hash::iter_point</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>, and <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a499b310c5822eb54832b1a6b891bfa0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_ngram_hash_iterator_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate over all entries in an n-gram hash. </p>
<p>Simple iterator for the entries of an n-gram hash.</p>
<p>Note that there is only a single iterator for each cl_ngram_hash object, so different parts of the application code must not try to iterate through the hash at the same time.</p>
<p>This function resets the iterator to the start of the hash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The n-gram hash to iterate over. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="struct__cl__ngram__hash.html#ac3061c63dec6a5ee2a1594c0de8ac365">_cl_ngram_hash::iter_bucket</a>, <a class="el" href="struct__cl__ngram__hash.html#a5e14daa20ab4f7ce3eb9181b7b31c9fe">_cl_ngram_hash::iter_point</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>, and <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bd2ffc179aa153f123f26ddfa5bd313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl_ngram_hash_print_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display statistics on bucket fill rates (for debugging and optimization). </p>
<p>This function prints a table showing the distribution of bucket sizes, i.e. how many buckets contain a given number of keys. The table will be printed to STDERR, as all debugging output in CWB.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The n-gram hash. </td></tr>
    <tr><td class="paramname">max_n</td><td>Count buckets with up to max_n entries. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="cl_8h.html#a9e15a3c725711d9effd623b2f3e225be">cl_free</a>, <a class="el" href="ngram-hash_8c.html#a01c71fc6cf3d13bb953435924d2cbdac">cl_ngram_hash_stats()</a>, and <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>.</p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4">cl_ngram_hash_check_grow()</a>, and <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a99a7198d2a3bf6aaf5ee3d7242aa2c81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cl_ngram_hash_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the number of distinct n-grams stored in a cl_ngram_hash. </p>
<p>This returns the total number of entries in all the buckets in the whole hash table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The hash to size up. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#a05de9d2e9fdfcc8bf932ca13b95ede29">_cl_ngram_hash::entries</a>.</p>

<p>Referenced by <a class="el" href="groups_8c.html#af2a9b2c57eae7adc352b65db3e9d5443">ComputeGroupInternally()</a>, and <a class="el" href="cwb-scan-corpus_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a01c71fc6cf3d13bb953435924d2cbdac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* cl_ngram_hash_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cl_8h.html#a72f1e1a2e26155366b42617524603b29">cl_ngram_hash</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute statistics on bucket fill rates (for debugging and optimization). </p>
<p>Statistics on bucket fill rates for debugging purposes.</p>
<p>This function returns an allocated integer array of length max_n + 1, whose i-th entry specifies the number of buckets containing i keys. For i == 0, this is the number of empty buckets. The last entry (i == max_n) is the cumulative number of buckets containing i or more entries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The n-gram hash. </td></tr>
    <tr><td class="paramname">max_n</td><td>Count buckets with up to max_n entries. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__cl__ngram__hash.html#aedff83072c3ab4f3719e66edc63610d8">_cl_ngram_hash::buckets</a>, <a class="el" href="cl_8h.html#a5b756594ae431fd5ec0ffbdc77db1e64">cl_calloc()</a>, <a class="el" href="struct__cl__ngram__hash__entry.html#a415343b23a10c2052f88c6aa5d365841">_cl_ngram_hash_entry::next</a>, and <a class="el" href="struct__cl__ngram__hash.html#ac308bd0563878b4c7059b0819925dcb3">_cl_ngram_hash::table</a>.</p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#a3bd2ffc179aa153f123f26ddfa5bd313">cl_ngram_hash_print_stats()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6324b7647e83d71e70bb3f67ebd1a48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int hash_ngram </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>tuple</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes 32bit hash value for n-gram. </p>

<p>Referenced by <a class="el" href="ngram-hash_8c.html#ad8e621006b67521321ffdd496b5f7db4">cl_ngram_hash_check_grow()</a>, and <a class="el" href="ngram-hash_8c.html#a28f8f861644659f214b707aad8c9feb5">cl_ngram_hash_find_i()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 17 2017 20:15:18 for CWB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
